
# 개략적인 규모 추정

개략적인 규모 추정이란 보편적으로 통용되는 성능 수치상에서 사고 실험을 행하여 추정치를 계산하는 행위를 의미합니다. 이는 어떤 설계가 요구사항에 부합할 것인지를 확인하기 위한 과정입니다. 개략적인 규모 추정을 위해서는 2의 제곱수, 응답지연 값, 그리고 가용성에 관계된 수치들을 기본적으로 잘 이해하고 있어야 합니다.

## 2의 제곱수

데이터 볼륨의 단위를 2의 제곱수로 표현하는 방법을 아는 것은 중요합니다.

- **최소 단위:** 1바이트 (8비트)
- **ASCII 메모리 크기:** 1바이트

## 모든 프로그래머가 알아야 하는 응답지연 값

다음은 프로그래머가 알아야 할 중요한 응답지연 값입니다:

- **L1 캐시 참조:** 매우 빠름
- **분기 예측 오류:** 약간의 지연
- **L2 캐시 참조:** 비교적 빠름
- **뮤텍스 락/언락:** 중간 정도의 지연
- **주 메모리 참조:** 느림
- **Zippy로 1KB 압축:** 빠름
- **1 Gbps 네트워크로 2KB 전송:** 중간 정도의 지연
- **메모리에서 1 MB 순차적으로 읽기:** 빠름
- **같은 데이터 센터 내에서의 메시지 왕복 지연속도:** 중간 정도의 지연
- **디스크 탐색:** 매우 느림
- **네트워크에서 1MB 순차적으로 읽기:** 느림
- **디스크에서 1MB 순차적으로 읽기:** 매우 느림
- **한 패킷의 CA로부터 네덜란드까지의 왕복 지연속도:** 매우 느림

### 결론

- 메모리는 빠르지만 디스크는 여전히 느리므로 디스크 탐색은 회피해야 합니다.
- 단순한 압축 알고리즘은 빠릅니다.
- 가능한 데이터를 인터넷으로 전송하기 전에 압축해야 합니다.
- 데이터 센터는 여러 지역에 분산되어 있으므로, 센터들 간의 데이터 전달 시간은 소요될 수 있습니다.

## 가용성에 관계된 수치

고가용성이란, 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력을 지칭합니다. 고가용성은 퍼센트로 표현되며, 100%는 한번도 중단되지 않은 서비스를 의미합니다.

SLA(Service Level Agreement)란 서비스 사업자와 고객 사이의 합의를 의미하며, 이 안에는 가용 시간이 기술되어 있습니다. 관습적으로 숫자 9를 표현하기 때문에 9가 많을수록 좋은 것입니다 (99% < 99.99% < 99.9999%).

## 면접 TIP

- **근사치를 활용한 계산:** 정확한 숫자보다는 근사치를 활용한 계산이 유용할 때가 많습니다.
- **가정을 적어두기:** 계산에 앞서 가정을 명확히 기록해두는 것이 중요합니다.
- **단위를 붙이기:** 모든 계산에 단위를 명확히 표시합니다.
- **QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 추정하기:** 각종 요구사항을 추정하여 명확히 제시합니다.
